define("gallery/modal/0.0.1/modal",["$"],function(a){var b=a("$"),c=function(a,d){d=b.extend({},c.defaults,d),this.options=d,this.$element=b(a).delegate('[data-dismiss="modal"]',"click.dismiss.modal",b.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};return c.defaults={backdrop:!0,keyboard:!0,show:!0},c.prototype={constructor:c,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var a=this,c=b.Event("show");this.$element.trigger(c),this.isShown||c.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var c=b.support.transition&&a.$element.hasClass("fade");a.$element.parent().length||a.$element.appendTo(document.body),a.$element.show(),c&&a.$element[0].offsetWidth,a.$element.addClass("in").attr("aria-hidden",!1),a.enforceFocus(),c?a.$element.one(b.support.transition.end,function(){a.$element.focus().trigger("shown")}):a.$element.focus().trigger("shown")}))},hide:function(a){a&&a.preventDefault(),a=b.Event("hide"),this.$element.trigger(a),this.isShown&&!a.isDefaultPrevented()&&(this.isShown=!1,this.escape(),b(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),b.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var a=this;b(document).on("focusin.modal",function(b){a.$element[0]===b.target||a.$element.has(b.target).length||a.$element.focus()})},escape:function(){var a=this;this.isShown&&this.options.keyboard?b(document).on("keyup.dismiss.modal",function(b){27==b.which&&a.hide()}):this.isShown||b(document).off("keyup.dismiss.modal")},hideWithTransition:function(){var a=this,c=setTimeout(function(){a.$element.off(b.support.transition.end),a.hideModal()},500);this.$element.one(b.support.transition.end,function(){clearTimeout(c),a.hideModal()})},hideModal:function(){var a=this;this.$element.hide(),this.backdrop(function(){a.removeBackdrop(),a.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},backdrop:function(a){var d=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=b.support.transition&&d;if(this.$backdrop=b('<div class="modal-backdrop '+d+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?b.proxy(this.$element[0].focus,this.$element[0]):b.proxy(this.hide,this)),e&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!a)return;e?this.$backdrop.one(b.support.transition.end,a):a()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),b.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(b.support.transition.end,a):a()):a&&a()}},c});